# [USACO] 2022_Mar. Alchemy [Bronze] [BOJ - 24982_G3]

## ðŸ“š ë¬¸ì œ

https://www.acmicpc.net/problem/24982

---

## ðŸ“– í’€ì´

ê°€ìž¥ ìˆ«ìžê°€ í° ê¸ˆì†ì„ ìž¬ê·€í•¨ìˆ˜ë¥¼ í™œìš©í•´ í•˜ë‚˜ì”© ë§Œë“¤ì–´ ë³´ì•˜ì—ˆëŠ”ë° ì‹œê°„ì´ˆê³¼ê°€ ë°œìƒí•˜ì—¬ ëŒ€íšŒì—ì„œ ì‹œê°„ ë‚´ì— ëª» í’€ì—ˆë‹¤..ðŸ˜¢

ì—¬ëŸ¬ ê°œì”© ë§Œë“¤ ìˆ˜ ìžˆëŠ”ì§€ ìž¬ê·€ë¥¼ ëŒë ¤ë³´ê¸° ì „ì— í™•ì¸í•  ìˆ˜ ì—†ìœ¼ë‹ˆ ì´ì§„ íƒìƒ‰ì„ í†µí•´ í•˜ë‚˜ì”© ë§Œë“¤ê¸°ë³´ë‹¨, **ëª‡ ê°œ**ë¥¼ ë§Œë“œëŠ” ê²ƒì´ ê°€ëŠ¥í•œì§€ë¥¼ í™•ì¸í•œë‹¤. ì¦‰, **ì´ì§„ íƒìƒ‰**ì„ í™œìš©í•œë‹¤.

ì´ì§„ íƒìƒ‰ì„ í•  ê²½ìš° nì´ ë‹µë³´ë‹¤ ì ì€ ê²½ìš°ëŠ” ë‹¤ ê°€ëŠ¥í•˜ê³ , í° ê²½ìš°ëŠ” ë¶ˆê°€ëŠ¥í•˜ë‹¤. ë”°ë¼ì„œ ë§¤ê°œë³€ìˆ˜ íƒìƒ‰ì„ í•œë‹¤.

> oooooooxxxxxxxxx....

checkë¥¼ í–ˆì„ ë•Œ ê°€ëŠ¥í•˜ë©´ ì™¼ìª½ì„ ë‚ ë¦¬ê³ , ë¶ˆê°€ëŠ¥í•˜ë©´ ì˜¤ë¥¸ìª½ì„ ë‚ ë ¤ ê°€ëŠ¥í•œ ê°’ ì¤‘ ê°€ìž¥ í° ê°’ì„ ì°¾ì•„ ì¶œë ¥í•œë‹¤.

ì¤‘ìš”í•œ ê±´ ìž¬ê·€ë¡œ ê°œìˆ˜ë¥¼ ì™„ì„±í•  ìˆ˜ ìžˆëŠ”ì§€ ì°¾ëŠ” ê²ƒì¸ë°, íƒ‘ë‹¤ìš´ í•¨ìˆ˜ë¡œ êµ¬í˜„í•œë‹¤.

1. ê°œìˆ˜ê°€ ì¶©ë¶„í•œ ê²½ìš°

   Trueë¥¼ ë¦¬í„´í•œë‹¤.

2. ê°œìˆ˜ê°€ ë¶ˆì¶©ë¶„í•œ ê²½ìš°

   1. ë¶ˆì¶©ë¶„í•œë° ë§Œë“¤ ì¡°í•©ì´ ì—†ëŠ” ê²½ìš°

      ë§Œë“¤ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ Falseë¥¼ ë¦¬í„´í•œë‹¤.

   2. ë¶ˆì¶©ë¶„í•˜ì§€ë§Œ ë§Œë“¤ ì¡°í•©ì´ ìžˆëŠ” ê²½ìš°

      ìžì‹ ë…¸ë“œë“¤ì„ í™•ì¸í•˜ë©´ì„œ ë¶ˆì¶©ë¶„í•œ ê°œìˆ˜ë§Œí¼ ë§Œë“¤ ìˆ˜ ìžˆëŠ”ì§€ í™•ì¸í•œë‹¤.

      ë§Œë“¤ ìˆ˜ ìžˆìœ¼ë©´ Trueë¥¼ ë¦¬í„´, ì—†ìœ¼ë©´ Falseë¥¼ ë¦¬í„´í•œë‹¤.

í•´ë‹¹ ê°’ì„ ë§Œë“¤ ë•Œë§ˆë‹¤ ë§Œë“  ê°œìˆ˜ë§Œí¼ ì¤„ì—¬ì¤˜ì•¼ í•œë‹¤. ë”°ë¼ì„œ ìž…ë ¥ëœ ê¸ˆì†ë“¤ì˜ ë¦¬ìŠ¤íŠ¸ëŠ” í•¨ìˆ˜ë¥¼ ìž…ë ¥í•˜ê¸° ì „ì— ì›ëž˜ ê°’ìœ¼ë¡œ ë˜ëŒë ¤ì•¼í•œë‹¤. ë”°ë¼ì„œ ìž…ë ¥ëœ ë¦¬ìŠ¤íŠ¸ë¥¼ ìŠ¬ë¼ì´ì‹±ì„ í†µí•´ ì–•ì€ ë³µì‚¬ í•˜ì—¬ ì‚¬ìš©í•œë‹¤. nì´ ìµœëŒ€ 100ì´ë¼ ë³µì‚¬í•´ë„ ì‹œê°„ì´ë‚˜ ê³µê°„ ë³µìž¡ë„ ìƒ ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.

## ðŸ“’ ì½”ë“œ

```python
import sys
input = sys.stdin.readline

def recur(metal, cnt):   # í•„ìš”í•œ ê°œìˆ˜ë¥¼ ìž¬ê·€ë¡œ êµ¬í˜„
    if visited[metal] >= cnt:   # ê°œìˆ˜ê°€ ì¶©ë¶„í•œ ê²½ìš°
        visited[metal] -= cnt
        return True
    if not graph[metal]:    # ì›í•˜ëŠ” ê°œìˆ˜ê°€ ì¶©ì¡±ë˜ì§€ ì•Šì•˜ëŠ”ë° ë§Œë“¤ ì¡°í•©ì´ ì—†ëŠ” ê²½ìš° ì¢…ë£Œ
        return False

    plus_cnt = cnt - visited[metal] # ê°œìˆ˜ê°€ ì¶©ë¶„í•˜ì§€ ì•Šì§€ë§Œ ë§Œë“¤ ì¡°í•©ì´ ìžˆëŠ” ê²½ìš° í™•ì¸
    for u in graph[metal]:
        if not recur(u, plus_cnt):  # ë§Œë“¤ ìˆ˜ ì—†ëŠ” ê²½ìš°
            return False
    visited[metal] = 0              # ë‹¤ ë§Œë“¤ ìˆ˜ ìžˆìœ¼ë©´ 0ìœ¼ë¡œ ë§Œë“ ë‹¤.
    return True


n = int(input().rstrip())
unit_cnt = [0] + list(map(int, input().split()))
k = int(input().rstrip())
graph = [[] for _ in range(n + 1)]  # i(ê¸ˆì†) -> j(ìž¬ë£Œ)

for _ in range(k):
    temp = list(map(int, input().split()))
    metal = temp[0]
    for material in temp[2:]:
        graph[metal].append(material)

s, e = 0, 10000000
ans = 0
while s <= e:   # ì´ì§„ íƒìƒ‰
    visited = unit_cnt[:]   # ìž…ë ¥ëœ ê°œìˆ˜ë¥¼ ë³µì‚¬
    mid = (s + e) // 2
    if recur(n, mid):
        ans = mid
        s = mid + 1
    else:
        e = mid - 1
print(ans)
```

## ðŸ” ê²°ê³¼

![image-20220409205541415](README.assets/image-20220409205541415.png)