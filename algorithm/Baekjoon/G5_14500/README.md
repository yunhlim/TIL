# [Baekjoon] 14500. ν…νΈλ΅λ―Έλ…Έ [G5]

## π“ λ¬Έμ 

https://www.acmicpc.net/problem/14500

---

## π“– ν’€μ΄

![image-20220424193202103](README.assets/image-20220424193202103.png)

κ°€μ¥ ν•©μ΄ μµλ€κ°€ λλ” ν…νΈλ΅λ―Έλ…Έ λ¨μ–‘μ„ μ°Ύλ” κ²ƒμ΄λ‹¤.

λ³΄λΌμƒ‰ λ¨ν• λΉΌκ³  λ‚λ¨Έμ§€λ” μ¤νƒμ„ ν™μ©ν•μ—¬ κµ¬ν•  μ μλ‹¤. λ¬΄μ΅°κ±΄ μ—°κ²°λλ” λ¶€λ¶„μΌλ΅ λ¶™μ–΄μ•Ό ν•λ‹¤.

λ”°λΌμ„ λ‚λ¨Έμ§€ 4κ°€μ§€ λ„ν•μ€ DFSλ΅ νƒμƒ‰ν•μ—¬ κµ¬ν•κ³ , λ³΄λΌμƒ‰μ€ λ”°λ΅ κµ¬ν•΄μ¤€λ‹¤.



### λ³΄λΌμƒ‰μ„ μ μ™Έν• 4κ°€μ§€ λ„ν• νƒμƒ‰ λ°©λ²•

ν„μ¬ μ  κΈ°μ¤€ DFSλ΅ 4μΉΈ μ›€μ§μ΄λ” λ¨λ“  κ²½μ°λ¥Ό κµ¬ν•κ³ , μµλ“κ°’μ„ κµ¬ν•λ‹¤.

BFSλ¥Ό μ‚¬μ©ν•  μ μ—†λ” μ΄μ λ” μ¤νƒμ„ ν™μ©ν•΄μ„ ν•λ‚μ”© λ¶™μ—¬μ¤μ•Όν•κΈ° λ•λ¬Έμ— DFSλ¥Ό μ‚¬μ©ν•λ‹¤.

DFSλ¥Ό μ‚¬μ©ν•  λ• μ¤‘μ”ν• ν¬μΈνΈλ”, ν„μ¬ μΆν‘λ” λ°©λ¬Έν‘μ‹λ¥Ό ν•΄ ν™•μΈν• μΉΈμ€ λ‹¤μ‹ ν™•μΈν•μ§€ μ•λ„λ΅ ν•λ‹¤. κ·Έλ¦¬κ³  ν™•μΈν–μΌλ©΄ λ‹¤μ‹ λ°©λ¬Έν‘μ‹λ¥Ό μ§€μ›μ•Ό ν•λ‹¤.

**νƒ‘λ‹¤μ΄** λ°©μ‹μ„ μ‚¬μ©ν•΄μ„ ν•΄κ²°ν•λ‹¤. λ„¤ λ°©ν–¥μΌλ΅ νƒμƒ‰ν•λ©΄μ„ λ„¤ λ°©ν–¥ μ¤‘ κ°€μ¥ ν° κ°’μ„ λ¦¬ν„΄ν•λ” λ°©μ‹μΌλ΅ μ ‘κ·Όν•λ‹¤. κ·Έλ¬λ©΄ κΈΈμ΄κ°€ 4μΈ ν•©μ΄ κ°€μ¥ ν° κ°’μ„ λ¦¬ν„΄ν•κ² λλ‹¤. λ°©λ¬Έν‘μ‹λ¥Ό μ• λ’¤λ΅ ν•΄μ¤μ•Όν•λ‹ μ‹ κ²½μ¨μ•Ό ν•λ‹¤!



### λ³΄λΌμƒ‰ νƒμƒ‰ λ°©λ²•

![image-20220425004416151](README.assets/image-20220425004416151.png)

ν„μ¬ μΆν‘ κΈ°μ¤€ λ„¤ λ°©ν–¥μ„ νƒμƒ‰ν•λ‹¤.

λ„¤ λ°©ν–¥μ κ°’μ„ λ¦¬μ¤νΈμ— λ‹΄μ•„ 3κ° μ΄μƒμΈ κ²½μ°λ§ ν•©μ„ λ¦¬ν„΄ν•λ‹¤. μ•„λ‹ κ²½μ°λ” 0μ„ λ¦¬ν„΄ν•΄ μµλ“κ°’ λΉ„κµν•  λ• κ°±μ‹ ν•  μ μ—†κ² λ§λ“ λ‹¤.

λ„¤ κ°μ κ°’μ΄λ©΄ μ •λ ¬μ‹μΌ ν¬κΈ°κ°€ ν° 3κ°μ κ°’μ ν•©μ„ λ¦¬ν„΄ν•λ‹¤. κ±°κΈ°λ‹¤κ°€ κ°€μ΄λ° κ°’μΈ ν„μ¬ μΆν‘ κ°’μ„ λ”ν•΄μ„ λΉ„κµν•λ‹¤.



## π“’ μ½”λ“

```python
def in_range(x, y):         # λ²”μ„λ¥Ό λ§μ΅±μ‹ν‚¤λ”μ§€ ν™•μΈν•  ν•¨μ
    return 0 <= x < n and 0 <= y < m


def dfs(cur, x, y, total):  # μ—°κ²°λ 4κ°μ ν…νΈλ΅λ―Έλ…Έ κµ¬ν•κΈ°
    if cur == 3:            # 4κ° μ—°κ²°λ κ²½μ°
        return total

    visited[x][y] = 1       # μ—°κ²°ν• μΆν‘λ¥Ό λ‹¤μ‹ νƒμƒ‰ν•μ§€ μ•λ„λ΅ λ°©λ¬Έν‘μ‹

    ret = 0                 # νƒ‘λ‹¤μ΄ λ°©μ‹μΌλ΅ ν•΄κ²°ν•κΈ° μ„ν•΄ λ¦¬ν„΄κ°’μ„ μ •μν•λ‹¤.
    for i in range(4):      # λ„¤ λ°©ν–¥ νƒμƒ‰
        nx = x + dx[i]
        ny = y + dy[i]
        if in_range(nx, ny) and not visited[nx][ny]:
            ret = max(ret, dfs(cur + 1, nx, ny, total + arr[nx][ny]))   # λ„¤ λ°©ν–¥ μ¤‘ μµλ€κ°’μ„ λ¦¬ν„΄ν•λ‹¤.

    visited[x][y] = 0       # λ§μ§€λ§‰μ— λ°©λ¬Έν‘μ‹λ¥Ό λ‹¤μ‹ μ§€μ›μ¤μ•Ό ν•λ‹¤.
    return ret


def purple(x, y):   # λ³΄λΌμƒ‰ ν…νΈλ΅λ―Έλ…Έλ¥Ό ν™•μΈν•  ν•¨μ('γ…—' λ¨μ–‘)
    nums = []       # ν„μ¬ μΆν‘ κΈ°μ¤€ λ„¤ λ°©ν–¥μΌλ΅ μ΅΄μ¬ν•λ” κ°’λ“¤μ„ λ‹¤ λ‹΄μ•„μ¤„ λ¦¬μ¤νΈ

    for i in range(4):
        nx = x + dx[i]
        ny = y + dy[i]
        if in_range(nx, ny):    # λ²”μ„λ¥Ό λ§μ΅±ν• κ²½μ° λ‹΄μ•„μ¤€λ‹¤.
            nums.append(arr[nx][ny])
    
    if len(nums) >= 3:          # κΈΈμ΄κ°€ 3 μ΄μƒμΈ κ²½μ°λ§ ν•©ν•΄μ„ λ¦¬ν„΄
        nums.sort(reverse=True)     # ν¬κΈ°κ°€ ν° 3κ°λ¥Ό λ”ν•΄μ„ λ¦¬ν„΄
        return sum(nums[0:3])
    else:       # κΈΈμ΄κ°€ 3λ³΄λ‹¤ μ‘μΌλ©΄ 0μ„ λ¦¬ν„΄ν•΄μ„ μµλ“κ°’ λΉ„κµν•΄λ„ λ°”λ€μ§€ μ•λ„λ΅ ν•λ‹¤.
        return 0


n, m = map(int, input().split())
arr = [list(map(int, input().split())) for _ in range(n)]
visited = [[0] * m for _ in range(n)]
dx = [0, 1, 0, -1]
dy = [1, 0, -1, 0]

result = 0
for i in range(n):
    for j in range(m):
        result = max(result, dfs(0, i, j, arr[i][j]), purple(i, j) + arr[i][j])

print(result)
```

## π” κ²°κ³Ό

![image-20220425005005240](README.assets/image-20220425005005240.png)
