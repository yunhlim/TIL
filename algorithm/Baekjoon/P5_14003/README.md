# [Baekjoon] 14003. ê°€ì¥ ê¸´ ì¦ê°€í•˜ëŠ” ë¶€ë¶„ ìˆ˜ì—´ 5 [P5]

## ğŸ“š ë¬¸ì œ

https://www.acmicpc.net/problem/14003

---

## ğŸ“– í’€ì´

ê·¸ ë™ì•ˆ êµ¬í–ˆë˜ LISë‘ ë‹¤ë¥¸ ì ì€ LISì˜ ê°œìˆ˜ê°€ ì•„ë‹Œ ê°’ì„ ì¶œë ¥í•´ì•¼ í•œë‹¤.

ë¨¼ì € Nì´ 1000000ê¹Œì§€ ìˆìœ¼ë‹ˆ dpë¡œ êµ¬í•  ìˆœ ì—†ê³ , ì´ì§„íƒìƒ‰ì„ í™œìš©í•´ì„œ êµ¬í•´ì•¼ í•œë‹¤.

ì´ì§„ íƒìƒ‰ìœ¼ë¡œ ê° ê°’ì„ LISì— ë‹´ëŠ”ë‹¤.

---

ì´ì§„ íƒìƒ‰ì„ í†µí•œ LIS DPëŠ” ì´ì „ê³¼ ê°™ì€ ë°©ë²•ì„ ì‚¬ìš©í•œë‹¤.

### ğŸ“Œ ê°€ì¥ ê¸´ ì¦ê°€í•˜ëŠ” ë¶€ë¶„ ìˆ˜ì—´ 2

https://velog.io/@yunhlim/Baekjoon-12015.-%EA%B0%80%EC%9E%A5-%EA%B8%B4-%EC%A6%9D%EA%B0%80%ED%95%98%EB%8A%94-%EB%B6%80%EB%B6%84-%EC%88%9C%EC%97%B4-2-G2

---

ì´ ë•Œ ê° ìˆ˜ì—´ì´ LISì—ì„œ ì–´ë–¤ ìœ„ì¹˜ë¥¼ ì°¨ì§€í•˜ëŠ”ì§€ **rank** ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“¤ì–´ì„œ ë‹´ì•„ì¤€ë‹¤.

LISë¥¼ ë‹¤ êµ¬í•œ í›„, rank ì¤‘ ê°€ì¥ í° ê°’ë¶€í„° ìˆœì°¨ì ìœ¼ë¡œ ëŒ€ì‘ë˜ëŠ” arr ê°’ì„ ë‹´ì•„ì¤€ë‹¤. ê·¸ëŸ¬ë©´ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ê°’ì´ ë‹´ê²Œ ë˜ë‹ˆê¹Œ, `[::-1]`ë¡œ ë’¤ì§‘ì–´ì„œ LIS ìˆ˜ì—´ì„ ì¶œë ¥í•œë‹¤.

ê·¸ë¦¼ìœ¼ë¡œ ì„¤ëª…í•´ë³´ë©´,

- Input

  > 9
  >
  > 3 1 4 6 2 2 0 3 6

ì‹œì‘ì ì„ ë¨¼ì € ë„£ì–´ì¤€ë‹¤. rnkëŠ” 0ë¶€í„° ì‹œì‘í•˜ë„ë¡ í•œë‹¤.

![image-20220410152441003](README.assets/image-20220410152441003.png)

ê·¸ ë‹¤ìŒ ê°’ì€ 1ì´ë‹¤.

1ì€ 3ë³´ë‹¤ ì‘ìœ¼ë‹ˆ LISì—ì„œ ë°”ê¿”ì¤€ë‹¤. LISì—ì„œì˜ ì¸ë±ìŠ¤ ìœ„ì¹˜ë„ 0ì´ë¯€ë¡œ rankë„ 0ì´ë‹¤.

![image-20220410152539922](README.assets/image-20220410152539922.png)

ë‹¤ìŒ ê°’ì€ 4ì´ë‹¤.

4ëŠ” 1ë³´ë‹¤ í¬ë¯€ë¡œ ë’¤ì— ë¶™ì¸ë‹¤. rankëŠ” LISì—ì„œì˜ ì¸ë±ìŠ¤ ê°’ì¸ 1ì´ ëœë‹¤.

![image-20220410152636978](README.assets/image-20220410152636978.png)

ë‹¤ìŒ ê°’ì€ 6ì´ë‹¤.

6ë„ 4ë³´ë‹¤ í¬ë¯€ë¡œ ë’¤ì— ë¶™ì¸ë‹¤. rankëŠ” 2ê°€ ëœë‹¤.

![image-20220410152714138](README.assets/image-20220410152714138.png)

ë‹¤ìŒ ê°’ì€ 2ì´ë‹¤.

2ëŠ” 6ë³´ë‹¤ ì‘ìœ¼ë¯€ë¡œ LIS ì¤‘ í¬ê±°ë‚˜ ê°™ì€ ê°’ ì¤‘ ê°€ì¥ ì‘ì€ ê°’ê³¼ ë°”ê¿”ì¤€ë‹¤. LISì˜ 4ì— 2ë¥¼ ë„£ê³  ê·¸ ë•Œì˜ index ê°’ì¸ 1ì„ rankì— ì ëŠ”ë‹¤.

![image-20220410152826171](README.assets/image-20220410152826171.png)

ë‹¤ìŒ ê°’ì€ 2ì´ë‹¤.

2ëŠ” 6ë³´ë‹¤ ì‘ìœ¼ë¯€ë¡œ LIS ì¤‘ í¬ê±°ë‚˜ ê°™ì€ ê°’ ì¤‘ ê°€ì¥ ì‘ì€ ê°’ê³¼ ë°”ê¾¼ë‹¤. 2ì™€ ë°”ê¾¸ë©´ ëœë‹¤. rankëŠ” 1ì´ë‹¤.

![image-20220410152929064](README.assets/image-20220410152929064.png)

ë‹¤ìŒ ê°’ì€ 0ì´ë‹¤.

0ì€ 6ë³´ë‹¤ ì‘ê³  0ë³´ë‹¤ í¬ê±°ë‚˜ ê°™ì€ ìˆ˜ ì¤‘ ê°€ì¥ ì‘ì€ ê°’ì€ 1ì´ë‹¤. 1ê³¼ ë°”ê¾¸ê³  ê·¸ ë•Œì˜ index ê°’ì¸ 0ì„ rankì— ì ëŠ”ë‹¤.

![image-20220410153014304](README.assets/image-20220410153014304.png)

ë‹¤ìŒ ê°’ì€ 3ì´ë‹¤.

3ì€ 6ë³´ë‹¤ ì‘ê³  0ë³´ë‹¤ í¬ê±°ë‚˜ ê°™ì€ ìˆ˜ ì¤‘ ê°€ì¥ ì‘ì€ ê°’ì€ 6ì´ë‹¤. 6ê³¼ ë°”ê¾¸ê³  ê·¸ ë•Œì˜ index ê°’ì¸ 2ë¥¼ rankì— ì ëŠ”ë‹¤.

![image-20220410153117322](README.assets/image-20220410153117322.png)

ë‹¤ìŒ ê°’ì€ 6ì´ë‹¤.

6ì€ 3ë³´ë‹¤ í¬ë‹ˆ LISì— ì¶”ê°€í•œë‹¤. rankëŠ” 3ì´ë‹¤.

![image-20220410153159052](README.assets/image-20220410153159052.png)

LISì˜ ê°œìˆ˜ëŠ” LISë§Œìœ¼ë¡œ êµ¬í•  ìˆ˜ ìˆì§€ë§Œ, ë¶€ë¶„ ìˆ˜ì—´ ê°’ì€ LISì— ì íŒ DP ê°’ê³¼ ë‹¤ë¥´ë‹¤.

LISì—ëŠ” 0 2 3 6ì´ ì í˜€ìˆì§€ë§Œ, ë¶€ë¶„ ìˆ˜ì—´ì˜ ë‹µì€ 1 2 3 6ì´ë‹¤.

êµ¬í•˜ëŠ” ë°©ë²•ì€ rankë¥¼ ë’¤ì—ì„œë¶€í„° í™•ì¸í•˜ë©° ìˆ«ìê°€ í° ê°’ë¶€í„° ì—­ìˆœìœ¼ë¡œ resultì— ë‹´ì•„ì£¼ë©´ëœë‹¤.

LIS DPì˜ ê¸¸ì´ê°€ 4ì´ë¯€ë¡œ 3ë¶€í„° ì°¾ì•„ì„œ ê·¸ë•Œì˜ ê°’ì„ resultì— ë‹´ì•„ì¤€ë‹¤.

![image-20220410153403645](README.assets/image-20220410153403645.png)

ê·¸ëŸ¬ë©´ ì´ˆë¡ìƒ‰ ë™ê·¸ë¼ë¯¸ ì¹œ ê°’ë“¤ì„ resultì— ë‹´ì•„ì£¼ëŠ” ê²ƒì´ë‹¤.

> result = [6, 3, 2, 1]

resultì— ì—­ìˆœìœ¼ë¡œ ë‹´ê²¨ìˆìœ¼ë‹ˆ `[::-1]`ë¡œ ë’¤ì§‘ì€ í›„ unpacking ì—°ì‚°ìë¥¼ í™œìš©í•´ ì¶œë ¥í•œë‹¤.

## ğŸ“’ ì½”ë“œ

```python
def binary_search(x):   # ë§¤ê°œë³€ìˆ˜ íƒìƒ‰(ì´ì§„ íƒìƒ‰)
    s, e = 0, len(lis) - 1
    ans = 0
    while s <= e:
        mid = (s + e) // 2
        if lis[mid] == x:   # ê°™ì€ ìˆ˜ê°€ ìˆë‹¤ë©´ return
            return mid
        elif lis[mid] > x:  # í° ìˆ˜ ì¤‘ ê°€ì¥ ì‘ì€ ìˆ˜ë¥¼ ë§¤ê°œë³€ìˆ˜ íƒìƒ‰
            ans = mid
            e = mid - 1
        else:
            s = mid + 1
    return ans


n = int(input())
arr = list(map(int, input().split()))
lis = [arr[0]]  # ì‹œì‘ë¶€ë¶„ì„ ë„£ì–´ì¤€ë‹¤.
rnk = [0 for _ in range(n)] # arrì˜ ê° ìˆ˜ì˜ lisì—ì„œì˜ ìˆœì„œë¥¼ ë‹´ì•„ì¤€ë‹¤.
for i in range(1, n):
    num = arr[i]
    if lis[-1] < num:       # lis ê°’ë“¤ë³´ë‹¤ í¬ë©´ ë§¨ ì˜¤ë¥¸ìª½ì— ì‚½ì…
        lis.append(num)
        rnk[i] = len(lis) - 1   # lisì—ì„œì˜ ìˆœì„œë¥¼ ë‹´ì•„ì¤€ë‹¤.
    elif lis[-1] > num:     # lisì˜ ê°€ì¥ í° ìˆ˜ë³´ë‹¤ ì‘ìœ¼ë©´ í¬ê±°ë‚˜ ê°™ì€ ê°’ë“¤ ì¤‘ ê°€ì¥ ì‘ì€ ìˆ˜ì™€ ë°”ê¾¼ë‹¤.
        index = binary_search(num)
        lis[index] = num
        rnk[i] = index          # indexì˜ ìœ„ì¹˜ë¥¼ ë‹´ì•„ì¤€ë‹¤.
    else:
        rnk[i] = len(lis) - 1   # ê°™ì€ ê²½ìš°ëŠ” ìˆœì„œê°€ ë§¨ ë’¤ ê°’ì´ë‘ ë™ì¼

prv = len(lis) - 1
result = []
for i in range(n)[::-1]:    # rnkë¥¼ ê±°ê¾¸ë¡œ ì„¸ë©° ì—­ìˆœìœ¼ë¡œ ê°’ì„ ë‹´ëŠ”ë‹¤.
    if rnk[i] == prv:
        result.append(arr[i])
        prv -= 1
        if prv < 0:         # ë‹¤ ë‹´ì•˜ìœ¼ë©´ ì¢…ë£Œí•œë‹¤.
            break

print(len(result))          # ê¸¸ì´ë¥¼ ì¶œë ¥
print(*result[::-1])        # ì—­ìˆœìœ¼ë¡œ ë‹´ì€ resultë¥¼ ë‹¤ì‹œ ë’¤ì§‘ê³  ì¶œë ¥í•œë‹¤.
```

## ğŸ” ê²°ê³¼

![image-20220410153550262](README.assets/image-20220410153550262.png)