# [Baekjoon] 1931. νμμ‹¤ λ°°μ • [S2]

## π“ λ¬Έμ 

https://www.acmicpc.net/problem/1931

---

**μ •λ ¬ + stack + μ¬κ·€λ¥Ό ν™μ©ν• μ΅°ν•©**μΌλ΅ ν•΄κ²°ν–λ‹¤.

λ¨Όμ € νμλ¥Ό λλ‚λ” μ‹κ°„ -> μ‹μ‘ν•λ” μ‹κ°„ μμΌλ΅ μ •λ ¬ν•λ‹¤.

μμ λ΅ λ“¤μ–΄μ¤λ” μ…λ ¥μ„ λ³΄λ©΄ μ•„λμ™€ κ°™λ‹¤. 

> 1 4
> 3 5
> 0 6
> 5 7
> 3 8
> 5 9
> 6 10
> 8 11
> 8 12
> 2 13
> 12 14

λλ‚λ” μ‹κ°„ -> μ‹μ‘ν•λ” μ‹κ°„ μμΌλ΅ μ •λ ¬λμ–΄ μλ‹¤. λ‹¤λ¥Έ μ…λ ¥μ΄ λ“¤μ–΄μ™€λ„ λ‹¤μκ³Ό κ°™μ΄ μ •λ ¬μ‹ν‚¨λ‹¤.

`meeting.sort(key=lambda x : (x[1], x[0]))`λ΅ sortμ keyλ¥Ό ν™μ©ν•΄ λ‘λ²μ§Έ μΈλ±μ¤λ΅ μ •λ ¬μ‹ν‚¤κ³  μ²«λ²μ§Έ μΈλ±μ¤λ΅ μ •λ ¬μ‹ν‚¨λ‹¤.

κ·Έλ¦¬κ³ λ‚μ„ μ¤νƒμ„ μ΄μ©ν•΄ μ„ μ…λ ¥μ„ ν•λ‚μ”© λ‹΄λ”λ‹¤.

μ΅°κ±΄μ„ ν•λ‚μ”© μƒκ°ν•΄λ³Έλ‹¤.

1. ν„μ¬ λ―Έν… μ‹κ°„μ΄ stack μ„μ μ‹κ°„μ„ ν¬ν•¨ν•λ©΄ μ¤νƒμ— λ„£μ§€ μ•λ”λ‹¤. ex). 3, 5λ” 3, 4λ¥Ό ν¬ν•¨ν•λ‹ μ¤νƒμ— λ„£μ§€ μ•λ”λ‹¤.
2. ν„μ¬ λ―Έν…μ΄ λλ‚λ” μ‹κ°„κ³Ό stack λ§¨ μ„μ— μλ” λ―Έν…μ΄ λλ‚λ” μ‹κ°„κ³Ό κ°™μ„ λ•, μ΄ κ²½μ°λ„ ν¬ν•¨ν•λ” κ²½μ°μΈλ° μ…λ ¥λ°›μ€ λ―Έν…μ΄ λ” μ‘μΌλ‹ stackμ— μλ” λ―Έν…μ„ μ κ±°ν•λ‹¤.

> λ―Έν…μ λλ‚λ” μ‹κ°„κ³Ό μ‹μ‘ν•λ” μ‹κ°„μ΄ κ°™μ„ κ²½μ°λ” μ΄μ „μ λ―Έν…κ³Ό ν¬ν•¨κ΄€κ³„μ— μλ” κ²ƒμ΄ μ•„λ‹λ―€λ΅ μ΄μ „ λ―Έν…κ³Ό λλ‚λ” μ‹κ°„μ΄ κ°™μ•„λ„ μ κ±°ν•μ§€ μ•λ”λ‹¤.

3. ν„μ¬ μ…λ ¥λ λ―Έν…μ΄ μ΄μ „μ λ―Έν…κ³Ό κ²ΉμΉμ§€ μ•μΌλ©΄ stackμ—μ„ μµλ€λ΅ μ§„ν–‰ν•  μ μλ” νμ μλ¥Ό μ°Ύλ”λ‹¤. κ·Έλ¦¬κ³  μ¤νƒμ— λ‹΄μ•„μ¤€λ‹¤.
4. λ―Έν…μ΄ ν¬ν•¨κ΄€κ³„ μ—†μ΄ κ²ΉμΉλ©΄ μ¤νƒμ— λ‹΄λ”λ‹¤. ex) 3, 5λ” 2, 4μ™€ ν¬ν•¨λμ§€ μ•κ² κ²ΉμΉλ‹¤.

μ¤νƒμ—μ„ μµλ€μ νμ μλ¥Ό μ°Ύμ„ λ•,

>μ΅°ν•©μ΄λ―€λ΅ μ¬κ·€ν•¨μλ¥Ό μ‚¬μ©ν•λ‹¤. κ°€μ§€μΉκΈ°λ¥Ό μ„ν•΄ λ” μ§„ν–‰ν•΄μ„ λ‹µμ΄ λ‚μ¬ μ μ—†λ” κ²½μ°λ” μ¤‘κ°„μ— μΆ…λ£μ‹μΌμ¤€λ‹¤. κ·Έλ¦¬κ³  κ°’μ„ ν•λ‚μ”© λ„£μ–΄μ¤„μ§€ ν™•μΈν•λ”λ°, νμ μ‹κ°„μ΄ κ²Ήμ³ λ„£μ„ μ μ—†μ„ λ•λ„ κ°€μ§€μΉκΈ° ν•΄μ¤€λ‹¤.

## π“’ μ½”λ“

```python
import sys
input = sys.stdin.readline

# μµλ€λ΅ μ§„ν–‰ν•  μ μλ” νμ μ μ°ΎκΈ°
def recur(cur, e, cnt): # μ΅°ν•© μ¬κ·€λ΅ κµ¬ν„(νμ μΈλ±μ¤, νμ λλ‚λ” μ‹κ°„, νμ κ°μ)
    global max_cnt
    
    if cur == len(stack):   # λ§μ§€λ§‰κΉμ§€ νƒμƒ‰ν–μΌλ©΄ μΆ…λ£
        max_cnt = max(max_cnt, cnt)     # μµλ€κ°’μΈμ§€ ν™•μΈν•κ³  λ°”κΏ”μ¤€λ‹¤.
        return
    # κ°€μ§€μΉκΈ°: λ” μ§„ν–‰ν•΄λ„ μ λ€ λ‹µμ΄ λ  μ μ—†μΌλ©΄ Stop
    if len(stack) - cur + cnt <= max_cnt:
        return

    recur(cur + 1, e, cnt)  # ν„μ¬ νμλ¥Ό μ§„ν–‰ν•μ§€ μ•λ”λ‹¤.
    if stack[cur][0] >= e:  # ν„μ¬ νμ μ‹κ°„μ΄ μ΄μ „μ— μ§„ν–‰ν• νμκ°€ λλ‚λ” μ‹κ°„κ³Ό μ• κ²ΉμΉ  λ•λ§ λ„£μ–΄μ¤„ μ μλ‹¤.
        recur(cur + 1, stack[cur][1], cnt + 1)  # λ‹¤μ νμ ν™•μΈ, νμ μ¤‘ κ°€μ¥ λ§μ§€λ§‰μ— λλ‚λ” μ‹κ°„ λ„£κ³ , νμ κ°μλ¥Ό +1


n = int(input())
meeting = [list(map(int, input().split())) for _ in range(n)]
result = 0
meeting.sort(key=lambda x : (x[1], x[0]))   # λ‘ λ²μ§Έ μΈλ±μ¤λ΅ λ¨Όμ € μ •λ ¬ν•κ³ , κ·Έ ν›„ μ²« λ²μ§Έ μΈλ±μ¤λ΅ μ •λ ¬ν•λ‹¤.

stack = []  # λΉ μ¤νƒ μ„ μ–Έ
for i in range(0, n):
    # ν„μ¬ λ“¤μ–΄μ¤λ” νμκ°€ μ΄μ „μ— μλ νμμ™€ λλ‚λ” μ‹κ°„μ΄ κ°™μΌλ©΄ λ²”μ„κ°€ λ” ν° μ΄μ „ κ±Έ μ—†μ•¤λ‹¤.
    # μ‹μ‘ν•λ” μ‹κ°„κ³Ό λλ‚λ” μ‹κ°„μ΄ κ°™μΌλ©΄ κ²ΉμΉλ” κ²ƒμ΄ μ•„λ‹λ―€λ΅ κ°™μ§€ μ•μ„ λ•λ΅ μ²λ¦¬ν•λ‹¤.
    while stack and (meeting[i][1] == stack[-1][1]) and (meeting[i][0] != meeting[i][1]):
        stack.pop() 
    if stack and meeting[i][0] >= stack[-1][1]: # ν„μ¬ ν™•μΈν• νμκ°€ μ΄μ „ νμμ™€ μ „ν€ κ²ΉμΉμ§€ μ•μ„ λ•
        max_cnt = 0
        recur(0, 0, 0)      # stackμ— μλ” νμλ“¤ μ¤‘ μµλ€λ΅ μ§„ν–‰ν•  μ μλ” νμ μλ¥Ό μ°Ύλ”λ‹¤.
        result += max_cnt
        stack = []          # stackμ„ μ΄κΈ°ν™” ν•λ‹¤.
    if stack == [] or meeting[i][0] > stack[-1][0]:     # νμ μ‹κ°„μ΄ μ΄μ „ κ²ƒκ³Ό μ—‡κ°λ¦¬κ² κ²ΉμΉλ©΄ stackμ— μ¶”κ°€ν•΄μ¤€λ‹¤.
        stack.append(meeting[i])

max_cnt = 0
recur(0, 0, 0)      # stackμ— λ‚¨μ•„μλ” κ²ƒλ“¤μ νμ μλ„ μ°Ύμ•„μ£Όκ³  μΆ…λ£ν•λ‹¤.
print(max_cnt + result)
```

## π” κ²°κ³Ό

![image-20220307210735480](README.assets/image-20220307210735480.png)

---

λλ‚λ” μ‹κ°„μ΄ μ§§μ€ μμΌλ΅ λ―Έν…μ„ ν•λ©΄ λλ‹¤.. κµ³μ΄ μ΅°ν•©μ„ μ• μ¨λ„ κ°€λ¥.

μƒλ΅ λ―Έν…μ„ λ„£μ–΄μ¤„ λ• μ΄μ „μ— λ“¤μ–΄μλ λ―Έν…μ λλ‚λ” μ‹κ°„λ³΄λ‹¤ λΉ¨λ¦¬ μ‹μ‘ν•λ”μ§€ ν™•μΈν•λ‹¤.

## π“’ μ½”λ“

```python
import sys
input = sys.stdin.readline


n = int(input())
meeting = [list(map(int, input().split())) for _ in range(n)]
result = 0
meeting.sort(key=lambda x : (x[1], x[0]))   # λ‘ λ²μ§Έ μΈλ±μ¤λ΅ λ¨Όμ € μ •λ ¬ν•κ³ , κ·Έ ν›„ μ²« λ²μ§Έ μΈλ±μ¤λ΅ μ •λ ¬ν•λ‹¤.

# λλ‚λ” μ‹κ°„μ΄ λΉ λ¥Έ κ²ƒμΌλ΅ κ³„μ† μ°ΎμΌλ©΄ λλ‹¤.
cnt = 0
e = 0
for i in range(n):
    if e <= meeting[i][0]:  # κ²ΉμΉλ”μ§€ ν™•μΈ
        cnt += 1
        e = meeting[i][1]
print(cnt)
```

## π” κ²°κ³Ό

![image-20220307213359701](README.assets/image-20220307213359701.png)

