# [Baekjoon] 17070. νμ΄ν”„ μ®κΈ°κΈ° 1 [G5]

## π“ λ¬Έμ 

https://www.acmicpc.net/problem/17070

---

**BFS**λ΅ ν’€μ–΄λ³Έλ‹¤. μ.. μ¤‘λ³µλ κ°’λ“¤μ΄ μμ–΄ μ‹κ°„μ΄κ³Όκ°€ λ°μƒν•  κ²ƒ κ°™λ‹¤. λ©”λ¨μ΄μ μ΄μ…μ„ ν™μ©ν•  μ μμ§€λ§ μΌλ‹¨ BFSλ΅λ§ ν’€λ©΄ μ‰¬μ°λ‹ ν• λ² ν’€μ–΄λ³Έλ‹¤.

μ‹μ‘μ μ„ νμ— λ„£λ”λ‹¤. μ΄ λ• λ°©ν–¥λ„ ν•¨κ» λ„£μ–΄μ¤€λ‹¤. [y, x, λ°©ν–¥]

λ°©ν–¥μ€ 0μ΄ μ¤λ¥Έμ½, λ€κ°μ„ μ΄ 1, μ•„λκ°€ 2μ΄λ‹¤.

νμ—μ„ κΊΌλ‚Έ μΆν‘μ λ°©ν–¥μ΄ μ¤λ¥Έμ½μ΄λ©΄ μ¤λ¥Έμ½κ³Ό λ€κ°μ„  λ°©ν–¥μ μΆν‘μ™€ λ°©ν–¥ κ°’μ„ νμ— λ„£μ–΄μ£Όκ³ , λ€κ°μ„ μ΄λ©΄ λ¨λ“  λ°©ν–¥μ„ νμ— λ„£λ”λ‹¤. κ·Έλ¦¬κ³  μ•„λμ½μ΄λ©΄ λ€κ°μ„ κ³Ό μ•„λ λ°©ν–¥μΌλ΅ νμ— λ„£λ”λ‹¤.

κ°’μ΄ n-1, n-1μ— λ„λ‹¬ν•λ” κ²½μ° κ²°κ³Ό cnt κ°’μ„ 1μ”© μ¦κ°€μ‹ν‚¨λ‹¤.

μΈλ±μ¤ μ΄κ³Ό λ²”μ„λ§ μ„¤μ •ν•λ©΄ μ‰½κ² μ½”λ“λ¥Ό μ‘μ„±ν•  μ μλ‹¤.

## π“’ BFS μ½”λ“ - μ‹κ°„ μ΄κ³Ό

```python
from collections import deque


n = int(input())
arr = [list(map(int, input().split())) for _ in range(n)]
dp = [[[-1, -1, -1] for _ in range(n)] for _ in range(n)]
queue = deque()
queue.append((0, 1, 0))   # μ‹μ‘μ μ μΆν‘μ™€ λ°©ν–¥, λ°©ν–¥μ€ μ¤λ¥Έμ½ 0, λ€κ°μ„  1, μ•„λ 2
result = 0

while queue:
    v = queue.popleft()
    if v[0] == n - 1 and v[1] == n - 1: # λμ— λ„μ°©ν• κ²½μ° cnt μ¦κ°€
        result += 1
    
    if v[2] != 2 and v[1] < n - 1 and arr[v[0]][v[1] + 1] == 0:  # μ•„λ λ°©ν–¥μ΄ μ•„λ‹λ©΄ μ¤λ¥Έμ½μΌλ΅ μ΄λ™ κ°€λ¥, μΈλ±μ¤ μ΄κ³Όν•μ§€ μ•κ², μ΄λ™ν• κ³³μ— λ²½μ΄ μ—†λ” κ²½μ°
        queue.append((v[0], v[1] + 1, 0))
    if v[2] != 0 and v[0] < n - 1 and arr[v[0] + 1][v[1]] == 0:  # μ¤λ¥Έμ½ λ°©ν–¥μ΄ μ•„λ‹λ©΄ μ•„λλ΅ μ΄λ™ κ°€λ¥, μΈλ±μ¤ μ΄κ³Όν•μ§€ μ•κ², μ΄λ™ν• κ³³μ— λ²½μ΄ μ—†λ” κ²½μ°
        queue.append((v[0] + 1, v[1], 2))
    if v[0] < n - 1 and v[1] < n - 1:   # λ€κ°μ„ μ€ λ¨λ‘ μ΄λ™κ°€λ¥ν•λ©°, μΈλ±μ¤ μ΄κ³Ό λ²”μ„λ§ μ„¤μ •
        if arr[v[0] + 1][v[1] + 1] == 0 and arr[v[0]][v[1] + 1] == 0 and arr[v[0] + 1][v[1]] == 0:  # λ€κ°μ„ μ€ μ„Έλ°©ν–¥ λ‹¤ λ²½μ΄ μ—†μ–΄μ•Ό ν•λ‹¤.
            queue.append((v[0] + 1, v[1] + 1, 1))   # λ€κ°μ„ μ€ μ–΄λ–¤ κ²½μ°λΌλ„ κ°€λ¥

print(result)
```

## π” κ²°κ³Ό - μ‹κ°„μ΄κ³Ό

![image-20220315104102977](README.assets/image-20220315104102977.png)

μμƒλ€λ΅ μ‹κ°„μ΄κ³Όκ°€ λ°μƒν•λ‹¤.

---

**BFS νƒμƒ‰μ— DP**λ¥Ό μ„μ–΄μ„  ν‘Όλ‹¤.

μ„Έ λ°©ν–¥μΌλ΅ **λ©”λ¨μ΄μ μ΄μ…** λ°°μ—΄μ„ λ§λ“¤κΈ° μ„ν•΄ 3μ°¨μ›μΌλ΅ μ„ μ–Έν•λ‹¤. [μ¤λ¥Έμ½, λ€κ°μ„ , μ•„λ]

ν™•μΈν•  μΈλ±μ¤μ κ²½μ°μ μλ” [[μ™Όμ½μ μ¤λ¥Έμ½, λ€κ°μ„  κ°’], [λ€κ°μ„ μ λ¨λ“  κ°’], [μ„μ½μ λ€κ°μ„ , μ•„λ κ°’]]μΌλ΅ κ°’μ„ λ„£μ–΄μ¤„ μ μλ‹¤.

κ·Έλ¦Όκ³Ό ν‘λ΅ μ„¤λ…ν•΄λ³Έλ‹¤.

### λ²½μ΄ μ—†λ” κ²½μ°

- Input

  > 6
  > 0 0 0 0 0 0
  > 0 0 0 0 0 0
  > 0 0 0 0 0 0
  > 0 0 0 0 0 0
  > 0 0 0 0 0 0
  > 0 0 0 0 0 0

λ¨Όμ € κΈ°μ €μ΅°κ±΄μ„ μ±„μ›μ£ΌκΈ° μ„ν•΄ μ„μ½κ³Ό μ™Όμ½μ μ‚¬μ΄λ“λ¥Ό λ‹¤ μ±„μ›μ¤€λ‹¤.

μ²« λ²μ§Έ ν–‰μ—μ„ μ‹μ‘μ  μ¤λ¥Έμ½μΌλ΅ [1, 0, 0]μ„ μ±„μ°λ”λ° λ²½μ„ λ§λ‚λ©΄ κ·Έ μ΄ν›„λ” [0, 0, 0]μΌλ΅ μ±„μ΄λ‹¤.

μ‹μ‘μ μ„ μ μ™Έν• μ™Όμ½λ¶€ν„° 0, 1 μ—΄λ“¤μ€ μ λ€ κ° μ μ—†μΌλ‹ [0, 0, 0]μΌλ΅ μ±„μ΄λ‹¤.

| 0, 0, 0 | 1, 0, 0 | 1, 0, 0 | 1, 0, 0 | 1, 0, 0 | 1, 0, 0 |
| ------- | ------- | ------- | ------- | ------- | ------- |
| 0, 0, 0 | 0, 0, 0 |         |         |         |         |
| 0, 0, 0 | 0, 0, 0 |         |         |         |         |
| 0, 0, 0 | 0, 0, 0 |         |         |         |         |
| 0, 0, 0 | 0, 0, 0 |         |         |         |         |
| 0, 0, 0 | 0, 0, 0 |         |         |         |         |

ν™•μΈν–λ κ±΄ λ” ν™•μΈν•μ§€ μ•κΈ° μ„ν•΄ λ€κ°μ„  λ°©ν–¥μΌλ΅ μ±„μ›λ‚κ°„λ‹¤.

![image-20220315114901183](README.assets/image-20220315114901183.png)

λ”°λΌμ„ νλ¥Ό ν™μ©ν•΄ (1, 2) μΈλ±μ¤λ¶€ν„° μ‹μ‘ν•λ‹¤.

1. (1, 2)μ 0λ²μ§Έ μΈλ±μ¤ κ°’μ€ μ™Όμ½μΈ (1, 1)μ μ¤λ¥Έμ½ λ°©ν–¥κ³Ό λ€κ°μ„  λ°©ν–¥μ κ°’μ„ λ”ν•΄μ¤€λ‹¤. λ‘ λ‹¤ 0μ΄λ―€λ΅ 0μ΄λ‹¤.
2. (1, 2)μ 1λ²μ§Έ μΈλ±μ¤ κ°’μ€ λ€κ°μ„ μΈ (0, 1)μ λ¨λ“  μΈλ±μ¤λ¥Ό λ”ν• κ°’μ΄λ‹¤. λ”°λΌμ„ 1μ΄λ‹¤.
3. (1, 2)μ 2λ²μ§Έ μΈλ±μ¤ κ°’μ€ μ„μ½μΈ (0, 2)μ λ€κ°μ„ , μ•„λ λ°©ν–¥μ κ°’μ„ λ”ν•΄μ¤€λ‹¤. λ‘ λ‹¤ 0μ΄λ―€λ΅ 0μ΄λ‹¤.

| 0, 0, 0 | 1, 0, 0 | 1, 0, 0 | 1, 0, 0 | 1, 0, 0 | 1, 0, 0 |
| ------- | ------- | ------- | ------- | ------- | ------- |
| 0, 0, 0 | 0, 0, 0 | 0, 1, 0 |         |         |         |
| 0 ,0 ,0 | 0, 0, 0 |         |         |         |         |
| 0, 0, 0 | 0, 0, 0 |         |         |         |         |
| 0, 0, 0 | 0, 0, 0 |         |         |         |         |
| 0, 0, 0 | 0, 0, 0 |         |         |         |         |

κ·Έ λ‹¤μ λ€κ°μ„ μ„ μ±„μ΄λ‹¤. μ΄ λ• λΈνƒ€ νƒμƒ‰μΌλ΅ ν™•μΈν• μΆν‘μ μ¤λ¥Έμ½ μ™Όμ½μ κ°’μ„ νμ— λ„£μ–΄μ¤€λ‹¤.

(1, 2)μ μ¤λ¥Έμ½μΈ (1, 3)κ³Ό μ•„λμ½μΈ (2, 2) μΆν‘μ κ°’μ„ μ±„μ›μ¤€λ‹¤.

μ„ κ³Όμ •μ„ λ‘κ°™μ΄ λ°λ³µν•λ‹¤.

| 0, 0, 0 | 1, 0, 0 | 1, 0, 0 | 1, 0, 0 | 1, 0, 0 | 1, 0, 0 |
| ------- | ------- | ------- | ------- | ------- | ------- |
| 0, 0, 0 | 0, 0, 0 | 0, 1, 0 | 1, 1, 0 |         |         |
| 0 ,0 ,0 | 0, 0, 0 | 0, 0, 1 |         |         |         |
| 0, 0, 0 | 0, 0, 0 |         |         |         |         |
| 0, 0, 0 | 0, 0, 0 |         |         |         |         |
| 0, 0, 0 | 0, 0, 0 |         |         |         |         |

μ—¬κΈ°μ„λ” (3, 2) μΆν‘μ²λΌ λ‘ λ² νμ— λ‹΄κΈ°λ” μ¤‘λ³µλ κ°’μ΄ μ΅΄μ¬ν•λ”λ° μ΄λ• ν™•μΈν• κ°’μ΄λ‚ μΈλ±μ¤λ¥Ό μ΄κ³Όν• κ°’μ€ λ²„λ¦°λ‹¤.

| 0, 0, 0 | 1, 0, 0 | 1, 0, 0 | 1, 0, 0 | 1, 0, 0 | 1, 0, 0 |
| ------- | ------- | ------- | ------- | ------- | ------- |
| 0, 0, 0 | 0, 0, 0 | 0, 1, 0 | 1, 1, 0 | 2, 1, 0 |         |
| 0 ,0 ,0 | 0, 0, 0 | 0, 0, 1 | 0, 1, 1 |         |         |
| 0, 0, 0 | 0, 0, 0 | 0, 0, 1 |         |         |         |
| 0, 0, 0 | 0, 0, 0 |         |         |         |         |
| 0, 0, 0 | 0, 0, 0 |         |         |         |         |



| 0, 0, 0 | 1, 0, 0 | 1, 0, 0 | 1, 0, 0 | 1, 0, 0 | 1, 0, 0 |
| ------- | ------- | ------- | ------- | ------- | ------- |
| 0, 0, 0 | 0, 0, 0 | 0, 1, 0 | 1, 1, 0 | 2, 1, 0 | 3, 1, 0 |
| 0 ,0 ,0 | 0, 0, 0 | 0, 0, 1 | 0, 1, 1 | 1, 2, 1 |         |
| 0, 0, 0 | 0, 0, 0 | 0, 0, 1 | 0, 1, 2 |         |         |
| 0, 0, 0 | 0, 0, 0 | 0, 0, 1 |         |         |         |
| 0, 0, 0 | 0, 0, 0 |         |         |         |         |



| 0, 0, 0 | 1, 0, 0 | 1, 0, 0 | 1, 0, 0 | 1, 0, 0 | 1, 0, 0 |
| ------- | ------- | ------- | ------- | ------- | ------- |
| 0, 0, 0 | 0, 0, 0 | 0, 1, 0 | 1, 1, 0 | 2, 1, 0 | 3, 1, 0 |
| 0 ,0 ,0 | 0, 0, 0 | 0, 0, 1 | 0, 1, 1 | 1, 2, 1 | 3, 3, 1 |
| 0, 0, 0 | 0, 0, 0 | 0, 0, 1 | 0, 1, 2 | 1, 2, 3 |         |
| 0, 0, 0 | 0, 0, 0 | 0, 0, 1 | 0, 1, 3 |         |         |
| 0, 0, 0 | 0, 0, 0 | 0, 0, 1 |         |         |         |



| 0, 0, 0 | 1, 0, 0 | 1, 0, 0 | 1, 0, 0 | 1, 0, 0 | 1, 0, 0 |
| ------- | ------- | ------- | ------- | ------- | ------- |
| 0, 0, 0 | 0, 0, 0 | 0, 1, 0 | 1, 1, 0 | 2, 1, 0 | 3, 1, 0 |
| 0 ,0 ,0 | 0, 0, 0 | 0, 0, 1 | 0, 1, 1 | 1, 2, 1 | 3, 3, 1 |
| 0, 0, 0 | 0, 0, 0 | 0, 0, 1 | 0, 1, 2 | 1, 2, 3 | 3, 4, 4 |
| 0, 0, 0 | 0, 0, 0 | 0, 0, 1 | 0, 1, 3 | 1, 3, 5 |         |
| 0, 0, 0 | 0, 0, 0 | 0, 0, 1 | 0, 1, 4 |         |         |

λ§μ§€λ§‰ κ³Όμ •μ€ μƒλµν•΄μ„ ν•¨κ» μ λ”λ‹¤.

λ‹¤μκ³Ό κ°™μ΄ λ§μ§€λ§‰μ΄ μΈλ±μ¤κ°€ μ±„μ›μ§€λ©΄ μΆ…λ£ν•λ‹¤.

| 0, 0, 0 | 1, 0, 0 | 1, 0, 0 | 1, 0, 0 | 1, 0, 0 | 1, 0, 0  |
| ------- | ------- | ------- | ------- | ------- | -------- |
| 0, 0, 0 | 0, 0, 0 | 0, 1, 0 | 1, 1, 0 | 2, 1, 0 | 3, 1, 0  |
| 0 ,0 ,0 | 0, 0, 0 | 0, 0, 1 | 0, 1, 1 | 1, 2, 1 | 3, 3, 1  |
| 0, 0, 0 | 0, 0, 0 | 0, 0, 1 | 0, 1, 2 | 1, 2, 3 | 3, 4, 4  |
| 0, 0, 0 | 0, 0, 0 | 0, 0, 1 | 0, 1, 3 | 1, 3, 5 | 4, 6, 8  |
| 0, 0, 0 | 0, 0, 0 | 0, 0, 1 | 0, 1, 4 | 1, 4, 8 | 5, 9, 14 |

5, 9, 14λ¥Ό λ‹¤ λ”ν• κ°’μΈ 28μ΄ λ‹µμ΄λ‹¤.

μ„ κ³Όμ •μ€ λ²½μ„ μƒκ° μ•ν–μ„ λ• ν•΄κ²°κ³Όμ •μ΄λ‹¤.



### λ²½μ΄ μλ” κ²½μ°

νμ—μ„ κ°’μ„ κΊΌλ‚΄ μΈλ±μ¤μ— κ°’μ„ λ„£μ–΄μ¤„ λ•, μ™Όμ½κ³Ό μ™Όμ½ μ„μ™€ μ„μ μΆν‘μ— λ²½μ΄ μλ”μ§€ ν™•μΈν•λ‹¤.

1. μ™Όμ½μ— λ²½μ΄ μλ” κ²½μ°λ” κ°€λ΅λ°©ν–¥κ³Ό λ€κ°μ„  κ°’μ΄ 0μ΄λ‹¤. [0, 0, ?]
2. μ„μ— λ²½μ΄ μλ” κ²½μ°λ” μ„Έλ΅λ°©ν–¥κ³Ό λ€κ°μ„  κ°’μ΄ 0μ΄λ‹¤. [?, 0, 0]
3. λ€κ°μ„ μ— λ²½μ΄ μλ” κ²½μ°λ” λ€κ°μ„  κ°’μ΄ 0μ΄λ‹¤. [?, 0, 0]

λ‹¤μ κ³Όμ •μ„ κ°’μ„ λ„£μ–΄μ¤„ λ• κ³ λ ¤ν•μ—¬ ν•΄κ²°ν•λ‹¤.

κ·Έλ¦¬κ³  μ°λ¦¬κ°€ ν™•μΈν•  n-1, n-1 μΈλ±μ¤μ— λ²½μ΄ μλ” κ²½μ°λ” λ°”λ΅ 0μ„ μ¶λ ¥ν•λ‹¤.

## π“’ BFS + DP μ½”λ“

```python
from collections import deque


n = int(input())
arr = [list(map(int, input().split())) for _ in range(n)]
dp = [[[-1, -1, -1] for _ in range(n)] for _ in range(n)] # λ°©ν–¥λ§λ‹¤ κ²½μ°μ μλ¥Ό μ μ–΄μ¤€λ‹¤. μ¤λ¥Έμ½, λ€κ°μ„ , μ•„λ

for i in range(n):
    for j in range(2):
        dp[i][j] = [0, 0, 0]    # κ° μ μ—†λ” μ™Όμ½λ¶€ν„° λ‘ μΉΌλΌμ— [0, 0, 0]μ„ λ„£μ–΄μ¤€λ‹¤.

dp[0][1] = [1, 0, 0]        # μ‹μ‘μ , (0, 1)μ—μ„ μ¤λ¥Έμ½ λ°©ν–¥
for i in range(2, n):       # μ²« λ²μ§Έ ν–‰μ— κ°’μ„ λ„£μ–΄μ¤€λ‹¤.
    if arr[0][i]:
        dp[0][i] = [0, 0, 0]    # μ¤‘κ°„μ— 0μ„ λ§λ‚λ©΄ κ·Έ μ¤λ¥Έμ½μ€ λ‹¤ 0μΌλ΅ μ²λ¦¬
    else:
        dp[0][i] = dp[0][i - 1]

if arr[n-1][n-1] == 1:      # λ²½μ΄ n-1, n-1μ— μλ” κ²½μ°
    dp[n-1][n-1] = [0, 0, 0]

queue = deque()
queue.append((1, 2))
while queue and dp[n-1][n-1][0] == -1:
    v = queue.popleft()
    y, x = v[0], v[1]

    if y == n or x == n or dp[y][x][0] != -1:   # μΈλ±μ¤λ¥Ό μ΄κ³Όν•κ±°λ‚ μ΄λ―Έ ν™•μΈν• κ°’μ΄λ©΄ λ³΄μ§€ μ•λ”λ‹¤.
        continue

    # μ™Όμ½μ—μ„ μ¤λ¥Έμ½ λ°©ν–¥μ—μ„ μ™”μ„ λ•
    if arr[y][x-1]:    # μ™Όμ½μ— λ²½μ΄ μλ” κ²½μ°
        dp[y][x][0] = 0
    else:   # μ™Όμ½μ κ°’ μ¤‘ λ€κ°μ„ , μ¤λ¥Έμ½ λ°©ν–¥μΌλ΅ μ¨ κ°’μ„ λ”ν•λ‹¤.
        dp[y][x][0] = dp[y][x-1][0] + dp[y][x-1][1] 
    # λ€κ°μ„  λ°©ν–¥μΌλ΅ μ™”μ„ λ•
    if arr[y][x-1] or arr[y-1][x-1] or arr[y-1][x]: # μ™Όμ½, λ€κ°μ„ , μ„μ½μΌλ΅ λ²½μ΄ μλ” κ²½μ°
        dp[y][x][1] = 0
    else:   # μ™Όμ½ μ„μ κ°’ μ„Έ κ°λ¥Ό λ‹¤ λ”ν•λ‹¤.
        dp[y][x][1] = sum(dp[y-1][x-1]) 
    # μ„μ½μ—μ„ μ•„λ λ°©ν–¥μΌλ΅ μ™”μ„ λ•
    if arr[y-1][x]:     # μ„μ½μ— λ²½μ΄ μλ” κ²½μ°
        dp[y][x][2] = 0
    else:   # μ„μ½μ κ°’ μ¤‘ λ€κ°μ„ , μ•„λ λ°©ν–¥μΌλ΅ μ¨ κ°’μ„ λ”ν•λ‹¤.
        dp[y][x][2] = dp[y-1][x][1] + dp[y-1][x][2] 

    queue.append((y, x + 1))
    queue.append((y + 1, x))
    queue.append((y + 1, x + 1))

if dp[n-1][n-1][0] == -1:   # λ„μ°©μ μ— λ„λ‹¬ν•μ§€ λ»ν• κ²½μ° 0 μ¶λ ¥
    print(0)
else:
    print(sum(dp[n-1][n-1]))
```

## π” κ²°κ³Ό

![image-20220315122528311](README.assets/image-20220315122528311.png)