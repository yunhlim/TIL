# [Baekjoon] 1865. ì›œí™€ [G3]

## ğŸ“š ë¬¸ì œ

https://www.acmicpc.net/problem/1865

---

## ğŸ“– í’€ì´ - í”Œë¡œì´ë“œ ì™€ìƒ¬

í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ê°€ 5ê°œê¹Œì§€ ë“¤ì–´ì˜¬ ìˆ˜ ìˆì–´ ì‹œê°„ì´ ì•„ìŠ¬ì•„ìŠ¬í•˜ë‹¤..

ë„ë¡œì™€ ê°€ì¤‘ì¹˜ê°€ ì¡´ì¬í•œë‹¤. ì›œí™€ì€ ì‹œê°„ì´ ê±°ê¾¸ë¡œ ê°€ë‹ˆ ìŒìˆ˜ì´ë‹¤.

ê°€ì¤‘ì¹˜ê°€ ìŒìˆ˜ì´ê³  ì‹œì‘ìœ„ì¹˜ê°€ ëª¨ë“  ì •ì ì´ë©´ì„œ, ì •ì ì˜ ê°œìˆ˜ê°€ ì ìœ¼ë‹ˆ **í”Œë¡œì´ë“œ ì™€ìƒ¬ ì•Œê³ ë¦¬ì¦˜**ì„ ì“´ë‹¤!!

0ë³´ë‹¤ ì‘ì€ ê°’ì„ ì°¾ìœ¼ë©´ ë˜ëŠ”ê±°ì§€ ë˜ëŒì•„ ì™”ì„ ë•Œ ìµœë‹¨ ê²½ë¡œë¥¼ êµ¬í•˜ë¼ëŠ” ë¬¸ì œê°€ ì•„ë‹ˆë¯€ë¡œ ê·¸ ìë¦¬ë¡œ ê°€ëŠ” ê²½ë¡œë¥¼ 0ìœ¼ë¡œ êµ³ì´ ë§Œë“¤ì§€ ì•ŠëŠ”ë‹¤.

í”Œë¡œì´ë“œ ì™€ìƒ¬ ì•Œê³ ë¦¬ì¦˜ì„ ì“´ í›„, í•˜ë‚˜ë¼ë„ 0ë³´ë‹¤ ì‘ì€ ê°’ì´ ë‚˜ì˜¤ë©´ YESë¥¼ ì¶œë ¥í•˜ê³  ì¢…ë£Œí•œë‹¤.

## ğŸ“’ ì½”ë“œ

```python
import sys
input = sys.stdin.readline

def floyd():
    for k in range(1, n + 1):       # ê±°ì³ê°ˆ ê²½ìœ ì§€
        for i in range(1, n + 1):   # ì¶œë°œì§€
            if k == i:              # ê²½ìœ ì§€ì™€ ì¶œë°œì§€ëŠ” ë‹¬ë¼ì•¼ í•œë‹¤
                continue
            for j in range(1, n + 1):   # ëª©ì ì§€
                if k == j:          # ê²½ìœ ì§€ì™€ ëª©ì ì§€ë„ ë‹¬ë¼ì•¼ í•œë‹¤
                    continue
                arr[i][j] = min(arr[i][j], arr[i][k] + arr[k][j])   # ê²½ìœ í•˜ëŠ” ê±°ë¦¬ê°€ ì§§ìœ¼ë©´ ë°”ê¿”ì¤€ë‹¤.
                if arr[i][i] < 0:           # í•˜ë‚˜ë¼ë„ 0ë³´ë‹¤ ì‘ìœ¼ë©´ YESë¥¼ ì¶œë ¥
                    return 'YES'                
    return 'NO'

for tc in range(int(input().rstrip())):
    n, m, w = map(int, input().split())     # n : ì§€ì ì˜ ìˆ˜ m : ë„ë¡œì˜ ìˆ˜ w : ì›œí™€ì˜ ìˆ˜
    INF = n * 10000
    arr = [[INF] * (n + 1) for _ in range(n + 1)]
    for i in range(m):  # ë„ë¡œëŠ” ë°©í–¥ì´ ì—†ëŠ” ê·¸ë˜í”„
        s, e, t = map(int, input().split())
        arr[s][e] = min(t, arr[s][e])       # ê°€ì¥ ì‘ì€ ê°’ì„ ë„£ì–´ì¤€ë‹¤.
        arr[e][s] = min(t, arr[e][s])       # ê°€ì¥ ì‘ì€ ê°’ì„ ë„£ì–´ì¤€ë‹¤.
    for i in range(w):  # ì›œí™€ì€ ë°©í–¥ ìˆëŠ” ê·¸ë˜í”„
        s, e, t = map(int, input().split())
        arr[s][e] = min(-t, arr[s][e])      # ìŒìˆ˜ë„ ê°€ì¥ ì‘ì€ ê°’ì„ ë„£ì–´ì¤€ë‹¤.
    
    print(floyd())
```

## ğŸ” ê²°ê³¼

![image-20220324231145577](README.assets/image-20220324231145577.png)

í”Œë¡œì´ë“œ ì™€ìƒ¬ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ í’€ë¦¬ê¸´í•˜ëŠ”ë° ì‹œê°„ì´ ì˜¤ë˜ê±¸ë¦°ë‹¤.

---

## ğŸ“– í’€ì´ - ë²¨ë§Œ í¬ë“œ(ì •ì„ì ì¸ í’€ì´)

êµ³ì´ ë‹¤ ì°¾ì„ í•„ìš” ì—†ì´ ìŒìˆ˜ê°€ ë‚˜ì™”ì„ ë•Œ ì¢…ë£Œì‹œí‚¤ë©´ ë˜ë‹ˆ í”Œë¡œì´ë“œ ì™€ìƒ¬ ì•Œê³ ë¦¬ì¦˜ë³´ë‹¤ ë²¨ë§Œ í¬ë“œ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì‹œê°„ ê´€ë¦¬ ìƒ ìœ ë¦¬í•˜ë‹¤.

**ë²¨ë§Œí¬ë“œ ì•Œê³ ë¦¬ì¦˜**ì´ ë¬´ì—‡ì¸ì§€ ì•Œì•„ë³´ì!

ë‹¤ìµìŠ¤íŠ¸ë¼ëŠ” ê°€ì¥ ì‘ì€ ê±°ë¦¬ì˜ ì •ì ì„ í™•ì¸í•˜ë©´ì„œ í™ì„ ì´ìš©í•´ ì‹œê°„ì„ ì¤„ì—¬ êµ¬í˜„í–ˆë‹¤ë©´, ë²¨ë§Œ í¬ë“œëŠ” ê±°ë¦¬ê°€ ìŒìˆ˜ê°€ ìˆìœ¼ë‹ˆ í˜„ì¬ ì •ì ì—ì„œ ì—°ê²°ëœ ëª¨ë“  ì •ì ë“¤ì„ í™•ì¸í•˜ë©´ì„œ êµ¬í˜„í•œë‹¤.

ì •ì ì˜ ê°œìˆ˜ë³´ë‹¤ 1 ì ì€ íšŸìˆ˜ë¡œ ëŒë©´ ìŒì˜ cycleì´ ì—†ì„ ë•Œ í˜„ì¬ ìœ„ì¹˜ ê¸°ì¤€ ìµœë‹¨ ê²½ë¡œë¥¼ ë‹¤ ì°¾ì„ ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³  ìŒì˜ cycleì´ ìˆëŠ”ì§€ëŠ” ì •ì ì˜ ê°œìˆ˜ë§Œí¼ ëŒë©´ ì•Œ ìˆ˜ ìˆëŠ”ë° ì´ ë•Œì—ë„ ê°’ë“¤ì´ ê°±ì‹ ì´ ë˜ë©´ ìŒì˜ ì‚¬ì´í´ì´ ìˆëŠ” ê²ƒì´ë‹¤. ìŒì˜ ì‚¬ì´í´ì´ ìˆìœ¼ë©´ ëª‡ ë²ˆì„ ëŒì•„ë„ ê³„ì† ê°±ì‹ ëœë‹¤.

ì›Œí™€ ë¬¸ì œëŠ” ìŒì˜ ì‚¬ì´í´ì´ ì¡´ì¬í•˜ëŠ”ì§€ ì°¾ëŠ” ë¬¸ì œì´ë‹¤. ë”°ë¼ì„œ **ìŒì˜ cycle**ì´ ìˆëŠ”ì§€ ì°¾ëŠ” ê±´ í•˜ë‚˜ì˜ ì •ì ë§Œ ì‹œí–‰í•´ë„ ì°¾ì„ ìˆ˜ ìˆë‹¤. ì´ ì´ìœ ë•Œë¬¸ì— ë²¨ë§Œí¬ë“œê°€ í”Œë¡œì´ë“œ ì™€ìƒ¬ë³´ë‹¤ í›¨ì”¬ ë‹¨ì¶•ì‹œí‚¬ ìˆ˜ ìˆë‹¤.

ì •ì ì˜ ê°œìˆ˜ë§Œí¼ ëŒê³  ê·¸ ë–„ì—ë„ ê°’ì´ ë°”ë€ŒëŠ”ì§€ í™•ì¸í•œë‹¤!

## ğŸ“’ ì½”ë“œ

```python
# ë²¨ë§Œ í¬ë“œ ì•Œê³ ë¦¬ì¦˜
import sys
input = sys.stdin.readline


def bellman():      # ë²¨ë§Œí¬ë“œ ì•Œê³ ë¦¬ì¦˜, ìŒì˜ ì‚¬ì´í´ì´ ìˆëŠ”ì§€ í™•ì¸
    for i in range(n):
        for j in range(1, n + 1):
            for node in graph[j]:
                if dist[node] > dist[j] + arr[j][node]:
                    dist[node] = dist[j] + arr[j][node]
                    if i == n - 1:      # n - 1ë²ˆ ì´í›„ì¸ në²ˆì—ë„ ë°”ë€Œë©´ ìŒì˜ ì‚¬ì´í´ ì¡´ì¬
                        return 'YES'
    return 'NO'


for tc in range(int(input().rstrip())):
    n, m, w = map(int, input().split())     # n : ì§€ì ì˜ ìˆ˜ m : ë„ë¡œì˜ ìˆ˜ w : ì›œí™€ì˜ ìˆ˜
    INF = n * 10000
    arr = [[INF] * (n + 1) for _ in range(n + 1)]   # ê±°ë¦¬ë¥¼ ë‹´ì•„ì¤€ë‹¤.
    graph = [set() for _ in range(n + 1)]              # ê´€ê³„ë¥¼ ë‹´ì•„ì¤€ë‹¤.
    for i in range(m):  # ë„ë¡œëŠ” ë°©í–¥ì´ ì—†ëŠ” ê·¸ë˜í”„
        s, e, t = map(int, input().split())
        arr[s][e] = min(t, arr[s][e])       # ê°€ì¥ ì‘ì€ ê°’ì„ ë„£ì–´ì¤€ë‹¤.
        arr[e][s] = min(t, arr[e][s])       # ê°€ì¥ ì‘ì€ ê°’ì„ ë„£ì–´ì¤€ë‹¤.
        graph[s].add(e)
        graph[e].add(s)
    for i in range(w):  # ì›œí™€ì€ ë°©í–¥ ìˆëŠ” ê·¸ë˜í”„
        s, e, t = map(int, input().split())
        arr[s][e] = min(-t, arr[s][e])      # ìŒìˆ˜ë„ ê°€ì¥ ì‘ì€ ê°’ì„ ë„£ì–´ì¤€ë‹¤.
        graph[s].add(e)
    dist = [INF for _ in range(n + 1)]

    print(bellman())
```

## ğŸ” ê²°ê³¼

![image-20220330221730875](README.assets/image-20220330221730875.png)

ì‹œê°„ì´ í›¨ì”¬ ë‹¨ì¶•ë˜ì—ˆë‹¤.ğŸ˜‰
