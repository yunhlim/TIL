# [Baekjoon] 2618. ê²½ì°°ì°¨ [P5]

## ğŸ“š ë¬¸ì œ : [ê²½ì°°ì°¨](https://www.acmicpc.net/problem/2618)

## ğŸ“– í’€ì´

ì‚¬ê±´ì˜ ê°œìˆ˜ 1000ê°œë©´ ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ êµ¬í•  ë•, 2ì˜ 1000ì œê³±ì´ë‹¤. ì‹œê°„ ì œí•œì´ 1ì´ˆì¸ ê²½ìš°ëŠ” ëŒ€ëµ 2ì˜ 25ì œê³±ê¹Œì§€ ê°€ëŠ¥í•˜ë‹ˆ ëª¨ë“  ê²½ìš°ë¥¼ êµ¬í•˜ë ¤ê³  í•˜ë©´ ë¶ˆê°€ëŠ¥í•˜ë‹¤. ë”°ë¼ì„œ DPë¡œ í•´ê²°í•œë‹¤.

ì¶œë™íšŸìˆ˜ í›„ ê²½ì°°ì°¨ì˜ ìœ„ì¹˜ë¥¼ ì ì–´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

>0 : [0, 0]
>
>1 : [1, 0] [0, 1]
>
>2 : [2, 0] [0, 2] [1, 2] [2, 1]
>
>3 : [2, 3] [0, 3] [1, 3] [3, 0] [3, 1] [3, 2]

ê° ì¶œë™ íšŸìˆ˜ ì´í›„ ê²½ì°°ì°¨ëŠ” í•­ìƒ í•´ë‹¹ ì¶œë™ íšŸìˆ˜ê°€ í•˜ë‚˜ë§Œ ë‚˜ì™€ì•¼ í•œë‹¤. ì¦‰ nì¸ ê²½ìš°ëŠ” 2 * në§Œí¼ì˜ ê²½ìš°ì˜ ìˆ˜ê°€ ìƒê¸´ë‹¤.

nì´ 1000ì´ë©´ (2000 + 2001) / 2ì´ë¯€ë¡œ, 2^nì¸ ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ êµ¬í•˜ì§€ ì•Šê³  í•´ê²°í•  ìˆ˜ ìˆë‹¤.



2ì°¨ì›ìœ¼ë¡œ ë°°ì—´ì„ ì„ ì–¸í•˜ì—¬ DPë¥¼ ë§Œë“¤ì—ˆë‹¤.

DP í…Œì´ë¸”ì—ëŠ” ê²½ì°°ì°¨ê°€ ì´ë™í•  ë•Œ x, y ì¢Œí‘œì—ëŠ” ê²½ì°°ì°¨ì˜ ìœ„ì¹˜ì´ê³  ê·¸ ë•Œì˜ ì´ ì´ë™ê±°ë¦¬ë¥¼ ê°’ì— ë„£ì–´ì¤€ë‹¤.



1. í•œ ë²ˆì˜ ì¶œë™ì—ëŠ” í•˜ë‚˜ì˜ ê²½ì°°ì°¨ë§Œ ì¶œë™í•˜ë¯€ë¡œ x, yì¢Œí‘œê°€ ê°™ì€ ê²½ìš°ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤. ë”°ë¼ì„œ ê·¸ ê°’ì€ í•­ìƒ 0ì´ ë‚˜ì˜¨ë‹¤. ê·¸ë¦¬ê³  ì²« ì¶œë™ì— ê°ê° ì´ë™í•œ ê°’ì„ ë„£ì–´ì¤€ë‹¤.

   4ë‘ 6ì´ ë‚˜ì˜¤ëŠ” ì´ìœ ëŠ” ì…ë ¥ìœ¼ë¡œ ë°›ì€ ì¶œë™ìœ„ì¹˜ì¸ 3,5ë¡œ ê°ê° ì´ë™í•œ ê²ƒì´ë‹¤.

   ![image-20220601014346427](README.assets/image-20220601014346427.png)

2. ë‘ ë²ˆì§¸ ì¶œë™í•  ë• ê°™ì€ ë¼ì¸ì˜ ìˆ˜ë“¤ì„ ì´ìš©í•´ ê°’ì„ ì°¾ì•„ì¤€ë‹¤.

   ![image-20220601014636590](README.assets/image-20220601014636590.png)

3. ì„¸ ë²ˆì§¸ ì¶œë™í•  ë•Œë¶€í„° ë³´ë©´ ì¢€ ë” ì •í™•í•œ ê·œì¹™ë“¤ì„ ì°¾ì„ ìˆ˜ ìˆë‹¤.

   - ê²½ì°°ì°¨ì˜ ì¶œë™ ìœ„ì¹˜ê°€ ë‹¤ë¥¸ ê²½ì°°ì°¨ ìœ„ì¹˜ë‘ í•˜ë‚˜ ì°¨ì´ë‚˜ëŠ” ê²½ìš°

     ì´ ë•Œì—ëŠ” ì—¬ëŸ¬ ê°€ì§€ ê²½ìš°ì˜ ìˆ˜ë“¤ ì¤‘ ìµœì†Œ ì´ë™ê±°ë¦¬ ê°’ì„ ì°¾ì•„ ë„£ì–´ì¤€ë‹¤.

     ![image-20220601014856652](README.assets/image-20220601014856652.png)

   - ì•„ë‹Œ ê²½ìš°ëŠ” 2ë²ˆì§¸ì—ì„œ êµ¬í•œ ê²ƒì²˜ëŸ¼ ì¸ì ‘í•œ ì¢Œí‘œì—ì„œ ì´ë™í•œ ê±°ë¦¬ë¥¼ ì°¾ì•„ ë„£ì–´ì¤€ë‹¤. ê·¸ëŸ¼ ë‹¤ìŒê³¼ ê°™ì´ êµ¬í•  ìˆ˜ ìˆë‹¤.

     ![image-20220601015022032](README.assets/image-20220601015022032.png)

ìœ„ ê·œì¹™ì„ ì´ìš©í•´ ì‘ì„±í•˜ì—¬ ë§¨ í…Œë‘ë¦¬ì˜ ê°’ ì¤‘ ê°€ì¥ ì‘ì€ ê°’ì„ ì°¾ìœ¼ë©´ ê·¸ê²Œ ê²½ì°°ì°¨ê°€ ì´ë™í•œ ìµœì†Œ ê±°ë¦¬ì´ë‹¤.

9ê°€ ê°€ì¥ ì‘ìœ¼ë¯€ë¡œ 9ê°€ ìµœì†Œ ê±°ë¦¬ì¸ë° ì´ ë•Œ ê²½ì°°ì°¨ ë²ˆí˜¸ë¥¼ ì¶”ì í•˜ê¸° ìœ„í•´ì„œ ì—­ì¶”ì  ë°©ë²•ì„ ì‚¬ìš©í•œë‹¤.

DP ì—­ì¶”ì ì„ í™œìš©í•˜ê¸° ìœ„í•´ì„œ ìš°ë¦¬ëŠ” ê²½ì°°ì°¨ì˜ ê±°ë¦¬ë¥¼ ì ìœ¼ë©´ì„œ visited ë°°ì—´ì— ì´ì „ ê²½ì°°ì°¨ë“¤ì˜ ì¢Œí‘œë¥¼ ë‹´ì•„ì¤€ë‹¤.

ì—­ì¶”ì  ì‹œ ì´ì „ ê²½ì°°ì°¨ì˜ ì¢Œí‘œì™€ ë‹¤ë¥¸ ì¢Œí‘œê°€ ë¬´ì—‡ì¸ì§€ í™•ì¸í•˜ë©° ê²½ì°°ì°¨ 1ì´ ì›€ì§ì˜€ëŠ”ì§€ ê²½ì°°ì°¨ 2ê°€ ì›€ì§ì˜€ëŠ”ì§€ íŒŒì•…í•  ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³  ë°°ì—´ì— ë‹´ì•„ì¤€ë‹¤.

ë°°ì—´ì— ë‹´ì€ ê±¸ í•˜ë‚˜ì”© êº¼ë‚´ ì¶œë ¥í•˜ë©´ ìˆœì„œëŒ€ë¡œ ê²½ì°°ì°¨ë¥¼ ì¶œë ¥í•  ìˆ˜ ìˆë‹¤.

## ğŸ“’ ì½”ë“œ

```python
def distance(a, b):     # ê²½ì°°ì°¨ê°€ ì´ë™í•œ ê±°ë¦¬
    return abs(a[0] - b[0]) + abs(a[1] - b[1])


def traceback(x, y, order):     # ê²½ì°°ì°¨ ì¢Œí‘œë¥¼ ì—­ì¶”ì í•˜ì—¬ ì–´ë–¤ ê²½ì°°ì°¨ê°€ ì›€ì§ì˜€ëŠ”ì§€ ì°¾ëŠ”ë‹¤.
    if x == 0 and y == 0:
        return order
    
    prv = visited[x][y]         # visitedì— ë‹´ì€ ì´ì „ ê²½ì°°ì°¨ ì¢Œí‘œ
    if prv[0] == x:
        return traceback(*prv, [2] + order)     # ì´ì „ ì¢Œí‘œì™€ ê²½ì°°ì°¨ 1ì˜ ìœ„ì¹˜ê°€ ê°™ìœ¼ë‹ˆ ê²½ì°°ì°¨ 2ê°€ ì›€ì§ì¸ ê²ƒ
    else:
        return traceback(*prv, [1] + order)     # ì´ì „ ì¢Œí‘œì™€ ê²½ì°°ì°¨ 2ì˜ ìœ„ì¹˜ê°€ ê°™ìœ¼ë‹ˆ ê²½ì°°ì°¨ 1ì´ ì›€ì§ì¸ ê²ƒ

n = int(input())
w = int(input())
arr = [[[0, 0], [0, 0]] for _ in range(w + 1)]  # ê²½ì°°ì°¨ë“¤ì˜ ì¢Œí‘œë¥¼ ë‹´ì•„ì¤€ë‹¤.
arr[0][0] = [1, 1]      # ê²½ì°°ì°¨ 1ì˜ ì´ˆê¸° ìœ„ì¹˜
arr[0][1] = [n, n]      # ê²½ì°°ì°¨ 2ì˜ ì´ˆê¸° ìœ„ì¹˜
for i in range(1, w + 1):       # ê²½ì°°ì°¨ê°€ í•´ë‹¹ ì¶œë™ì— ì˜í•´ ì›€ì§ì´ëŠ” ì¢Œí‘œ
    arr[i][0] = list(map(int, input().split()))
    arr[i][1] = arr[i][0]       # ì¶œë™í•˜ëŠ” ìœ„ì¹˜ëŠ” ë™ì¼(ì´ˆê¸° ìœ„ì¹˜ê°€ ë‹¤ë¥´ë‹ˆ 2ì°¨ì›ìœ¼ë¡œ ì ëŠ” ê²ƒ!)

dp = [[0] * (w + 1) for _ in range(w + 1)]      # ì¤‘ë³µì„ ê³„ì‚°ì„ ì œê±°í•˜ê¸° ìœ„í•´ DP í™œìš©
visited = [[[0, 0] for _ in range(w + 1)] for _ in range(w + 1)]    # ì´ì „ ê²½ì°°ì°¨ ì¢Œí‘œë¥¼ ë‹´ì•„ì¤€ë‹¤.(ì—­ì¶”ì  í•˜ê¸° ìœ„í•¨)

# ê¸°ì €ì¡°ê±´ : ì²« ì¶œë™ì— ì˜í•´ ì›€ì§ì´ëŠ” ê±°ë¦¬
dp[1][0] = distance(arr[0][0], arr[1][0])       
dp[0][1] = distance(arr[0][1], arr[1][1])

for i in range(2, w + 1):
    d1 = distance(arr[i][0], arr[i-1][0])
    d2 = distance(arr[i][1], arr[i-1][1])
    for j in range(0, i):
        if j == i-1:    # ì¶œë™ íšŸìˆ˜ê°€ 1 ì°¨ì´ë‚˜ëŠ” ê²½ìš°
            dp[i][j] = 100000000
            dp[j][i] = 100000000
            for k in range(j):  # ìµœì†Œì˜ ì´ë™ê±°ë¦¬ ê°’ì„ ì°¾ëŠ”ë‹¤.
                d1 = distance(arr[k][0], arr[i][0])
                d2 = distance(arr[k][1], arr[i][1])
                if dp[i][j] > dp[k][j] + d1:
                    dp[i][j] = dp[k][j] + d1    # ì›€ì§ì¸ ê°’ì„ ë„£ì–´ì¤€ë‹¤.
                    visited[i][j] = [k, j]      # ì´ì „ ê²½ì°°ì°¨ ìœ„ì¹˜ ì¢Œí‘œë¥¼ ì €ì¥
                if dp[j][i] > dp[j][k] + d2:
                    dp[j][i] = dp[j][k] + d2
                    visited[j][i] = [j, k]
        else:       
            dp[i][j] = dp[i-1][j] + d1  # ì›€ì§ì¸ ê°’ì„ ë„£ì–´ì¤€ë‹¤.
            dp[j][i] = dp[j][i-1] + d2
            visited[i][j] = [i-1, j]    # ì´ì „ ê²½ì°°ì°¨ ìœ„ì¹˜ ì¢Œí‘œë¥¼ ì €ì¥
            visited[j][i] = [j, i-1]

result = 10000000
index = [0, 0]
for i in range(w):      # ë§ˆì§€ë§‰ ì¶œë™ê¹Œì§€ ëë§ˆì¹œ ê²½ìš° ì¤‘ ê°€ì¥ ìµœì†Œ ì´ë™ê±°ë¦¬ë¥¼ ì°¾ëŠ”ë‹¤.
    if result > dp[w][i]:
        result = dp[w][i]
        index = [w, i]
    if result > dp[i][w]:
        result = dp[i][w]
        index = [i, w]

print(result)           # ìµœì†Œ ì´ë™ê±°ë¦¬ë¥¼ ì¶œë ¥í•œë‹¤.
for police in traceback(*index, []):        # ì—­ì¶”ì ì„ í†µí•´ ê²½ì°°ì°¨ë“¤ì˜ ì¶œë™ ìˆœì„œë¥¼ ì¶œë ¥í•œë‹¤.
    print(police)
```



## ğŸ” ê²°ê³¼

![image-20220601020602597](README.assets/image-20220601020602597.png)