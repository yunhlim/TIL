# [Baekjoon] 1941. μ†λ¬Έλ‚ μΉ κ³µμ£Ό [G3]

## π“ λ¬Έμ  : [μ†λ¬Έλ‚ μΉ κ³µμ£Ό](https://www.acmicpc.net/problem/1941)

---

## π“– ν’€μ΄

5 x 5 μ¤‘ 7κ°λ΅ μ—°κ²°ν•  μ μλ” λ¨λ“  κ²½μ°λ¥Ό νμ•…ν•΄μ•Ό ν•λ‹¤.

μ°μ„  λ¨λ“  μ μ„ μ‹μ‘μ μΌλ΅ μ΅κ³  λ§¤ μκ°„λ§λ‹¤ 2μ°¨μ› λ°°μ—΄μ„ νƒμƒ‰ν•λ©° ν„μ¬ κ³ λ¥Έ μ λ“¤μ μΈμ ‘ν• μ μ„ μ„ νƒν•΄ ν™•μ¥ν•΄λ‚κ°”λ‹¤.

λ°°μ—΄μ„ 2μ°¨μ›μΌλ΅ λ³΄μ§€ μ•κ³  μΉ κ³µμ£Όνλ¥Ό 1μ°¨μ›μ— μΆν‘ κ°’μ„ νν” κ°’μΌλ΅ λ‹΄μΌλ©° ν™•μΈν•΄λ‚κ°„λ‹¤.

κ·Έλ¦ΌμΌλ΅ λ³΄λ©΄ λ‹¤μκ³Ό κ°™λ‹¤.

1. λ¨Όμ € μ‹μ‘μ μ„ μ΅λ”λ‹¤. (λ¨λ“  μΆν‘μ μ μ„ μ‹μ‘μ μΌλ΅ μ΅μ•„μ¤ λ‹¤ ν™•μΈν•λ‹¤.)

   ![image-20220508153358975](README.assets/image-20220508153358975.png)

2. ν„μ¬ λ†“μ—¬μ§„ μΉ κ³µμ£Όνμ μ£Όλ³€μΌλ΅ ν™•μ¥ν•΄λ‚κ°„λ‹¤. κ·ΈλΌ κ° μ μλ” κ³³μ΄ λ‹¤μκ³Ό κ°™λ‹¤.

   ![image-20220508153509610](README.assets/image-20220508153509610.png)

3. λ„¤ κµ°λ°λ¥Ό λ‹¤ ν™•μΈν•΄μ•Ό ν•λ”λ° μΌλ‹¨ μ„μλ΅ ν• λ°©ν–¥μΌλ΅ μ›€μ§μΈλ‹¤.

   μ¤λ¥Έμ½ λ°©ν–¥μΌλ΅ μ΄λ™ν•λ©΄ λ‹¤μ μ›€μ§μΌ μ μλ” κ³³μ€ μ•„λμ™€ κ°™λ‹¤.

   ![image-20220508153608655](README.assets/image-20220508153608655.png)

λ”°λΌμ„ ν• λ…μ”© λ†“μ•„μ¤„ λ•λ§λ‹¤ μΉ κ³µμ£Όνλ“¤μ„ μνν•λ©° λ‹¤μ μ›€μ§μΌ μ μλ” κ³³μΌλ΅ μ›€μ§μ—¬μ¤€λ‹¤.

7λ…μ΄ λ  λ• κ°’μ΄ κ·Έλ¬λ©΄ μ¤‘λ³µλ κ°’μ΄ λ‚μ¬ μ μλ”λ°, λ‚λ” set() μλ£ν•μΌλ΅ κ°’μ„ λ‹΄μΌλ©° μ¤‘λ³µμ„ μ κ±°ν•΄μ£Όμ—λ‹¤.

setμ— λ¦¬μ¤νΈλ¥Ό λ‹΄μ„ μ μ—†μΌλ‹ λ°°μ—΄μ„ μ •λ ¬ μ‹ν‚¨ ν›„ tupleλ΅ ν•λ³€ν™ν•λ‹¤.

`[(1, 1), (2, 1), (4, 3)]` μ΄λ©΄ `((1, 1), (2, 1), (4, 3))` μΌλ΅ λ°”κΎΈμ–΄ μ„ΈνΈ μλ£ν•μ— λ‹΄μ•„μ¤€λ‹¤.

μΆν‘λ” μ •λ ¬μ‹ν‚¤λ‹ λ‘κ°™μ€ κ°’μ΄ λ‚μ¬ λ• μ¤‘λ³µμ„ μ κ±°ν•  μ μλ‹¤.

μ¤‘κ°„μ— κ°€μ§€μΉκΈ°λ¥Ό μ„ν•΄ μ•μΌλ΅ μ¶”κ°€ν•  μ μλ” νμλ¥Ό μ „λ¶€ Sλ΅ λ½‘μ•„λ„ Sκ°€ 4λ³΄λ‹¤ μ‘μΌλ©΄ λ” μ΄μƒ λ‹µμ΄ λ  μ μ—†μΌλ‹ μΆ…λ£ν•λ‹¤.



## π“’ μ½”λ“

```python
def in_range(x, y):     # λ°°μ—΄μ΄ 5x5λ¥Ό λ„μ–΄κ°€λ”μ§€ νμ•…
    return 0 <= x < 5 and 0 <= y < 5


def recur(cur, cnt):    # 7λ…μ„ λ§λ“¤μ–΄ μ¤€λ‹¤.
    if 7 - cur + cnt < 4:       # λ‚¨μ€ νμλ¥Ό λ¨λ‘ Sλ΅ λ½‘μ•„λ„ λ‹µμ΄ λ  μ μ—†λ” κ²½μ°
        return

    if cur == 7:        # μΉ κ³µμ£Ό μ™„μ„±
        result_visited.add(tuple(sorted(visited)))
        return

    for x, y in visited:          # ν„μ¬ μΉ κ³µμ£Όνμ— μ†ν• μΆν‘λ¥Ό μ°Ύμ•„μ¤€λ‹¤.
        for k in range(4):      # λ„¤ λ°©ν–¥μΌλ΅ λΈνƒ€ νƒμƒ‰
            nx = x + dx[k]
            ny = y + dy[k]
            if not in_range(nx, ny) or (nx, ny) in visited:
                continue
            visited.append((nx, ny))     # λ°©λ¬Έν‘μ‹
            # SμΈ κ²½μ°λ” cnt + 1, Yλ©΄ cnt
            recur(cur + 1, cnt + 1 if arr[nx][ny] == 'S' else cnt)
            visited.pop()     # μ¬κ·€κ°€ λλ‚λ©΄ λ°©λ¬Έν‘μ‹ μ κ±°


arr = list(input() for _ in range(5))
dx = [0, 1, 0, -1]
dy = [1, 0, -1, 0]
result_visited = set()
for i in range(5):
    for j in range(5):
        visited = [(i, j)]      # μ‹μ‘μ μ„ μ΅μ•„μ¤€λ‹¤.
        recur(1, 1 if arr[i][j] == 'S' else 0)  # μ‹μ‘μ μ΄ SμΈμ§€ YμΈμ§€ νμ•…

print(len(result_visited))      # λ  μ μλ” μ΅°ν•©μ κ°μλ¥Ό μ„Όλ‹¤.
```

## π” κ²°κ³Ό

![image-20220508154243160](README.assets/image-20220508154243160.png)

μ‹κ°„μ΄ μ¤λκ±Έλ Έλ‹¤. μΆ€ λ” μ‹κ°„μ„ μ¤„μ—¬λ³΄μ.

---

## π“– κ°μ„ λ ν’€μ΄

κ°€μ§€μΉκΈ°λ¥Ό λ” ν•λ‹¤.

μ‹μ‘μ μ„ Sκ°€ μ•„λ‹ μ‚¬λμ€ κ³ λ¥΄μ§€ μ•κ³ , SμΈ μ‚¬λλ§ κ³ λ¥Έλ‹¤. κ·Έλ¦¬κ³  λ‹¤λ¥Έ Sλ΅ μ‹μ‘ν•  λ• μ΄λ―Έ ν™•μΈν–λ Sκ°€ λ‚μ¤λ©΄ passν•λ„λ΅ ν•λ‹¤. μ™λƒλ©΄ Sλ¥Ό ν¬ν•¨ν• λ¨λ“  κ²½μ°λ¥Ό λ‹¤ μ°Ύμ•κΈ° λ•λ¬Έμ— λ μ°Ύλ” κ³Όμ •μ„ μ¤„μΈλ‹¤.

## π“’ κ°μ„ λ μ½”λ“

```python
def in_range(x, y):     # λ°°μ—΄μ΄ 5x5λ¥Ό λ„μ–΄κ°€λ”μ§€ νμ•…
    return 0 <= x < 5 and 0 <= y < 5


def recur(cur, cnt):    # 7λ…μ„ λ§λ“¤μ–΄ μ¤€λ‹¤.
    if 7 - cur + cnt < 4:       # λ‚¨μ€ νμλ¥Ό λ¨λ‘ Sλ΅ λ½‘μ•„λ„ λ‹µμ΄ λ  μ μ—†λ” κ²½μ°
        return

    if cur == 7:        # μΉ κ³µμ£Ό μ™„μ„±
        result.add(tuple(sorted(visited)))
        return

    for x, y in visited:            # ν„μ¬ μΉ κ³µμ£Όνμ— μ†ν• μΆν‘λ¥Ό μ°Ύμ•„μ¤€λ‹¤.
        for k in range(4):          # λ„¤ λ°©ν–¥μΌλ΅ λΈνƒ€ νƒμƒ‰
            nx = x + dx[k]
            ny = y + dy[k]
            if not in_range(nx, ny) or (nx, ny) in visited:
                continue
            # μ΄λ―Έ ν™•μΈν• SμΌ λ•
            if arr[nx][ny] == 'S' and (nx < i or (nx == i and ny < j)):  
                continue
            visited.append((nx, ny))     # λ°©λ¬Έν‘μ‹
            # SμΈ κ²½μ°λ” cnt + 1, Yλ©΄ cnt
            recur(cur + 1, cnt + 1 if arr[nx][ny] == 'S' else cnt)
            visited.pop()     # μ¬κ·€κ°€ λλ‚λ©΄ λ°©λ¬Έν‘μ‹ μ κ±°


arr = list(input() for _ in range(5))
dx = [0, 1, 0, -1]
dy = [1, 0, -1, 0]
result = set()
for i in range(5):
    for j in range(5):
        if arr[i][j] != 'S':
            continue
        visited = [(i, j)]      # μ‹μ‘μ μ„ μ΅μ•„μ¤€λ‹¤.
        recur(1, 1)  # μ‹μ‘μ μ΄ SμΈμ§€ YμΈμ§€ νμ•…

print(len(result))      # λ  μ μλ” μ΅°ν•©μ κ°μλ¥Ό μ„Όλ‹¤.
```

## π” κ°μ„ λ κ²°κ³Ό

![image-20220508161856118](README.assets/image-20220508161856118.png)